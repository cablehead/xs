# THIS FILE IS AUTOMATICALLY GENERATED BY CARGO
#
# When uploading crates to the registry Cargo will automatically
# "normalize" Cargo.toml files for maximal compatibility
# with all versions of Cargo and also rewrite `path` dependencies
# to registry (e.g., crates.io) dependencies.
#
# If you are reading this file be aware that the original Cargo.toml
# will likely look very different (and much more reasonable).
# See Cargo.toml.orig for the original contents.

[package]
edition = "2024"
rust-version = "1.85"
name = "iroh"
version = "0.91.2"
authors = [
    "dignifiedquire <me@dignifiedquire.com>",
    "n0 team",
]
build = "build.rs"
autolib = false
autobins = false
autoexamples = false
autotests = false
autobenches = false
description = "p2p quic connections dialed by public key"
readme = "README.md"
keywords = [
    "quic",
    "networking",
    "holepunching",
    "p2p",
]
license = "MIT OR Apache-2.0"
repository = "https://github.com/n0-computer/iroh"
resolver = "2"

[package.metadata.docs.rs]
all-features = true
rustdoc-args = [
    "--cfg",
    "iroh_docsrs",
]

[features]
default = ["metrics"]
discovery-local-network = ["dep:swarm-discovery"]
discovery-pkarr-dht = ["pkarr/dht"]
examples = [
    "dep:clap",
    "dep:tracing-subscriber",
    "dep:indicatif",
    "dep:parse-size",
    "iroh-base/ticket",
]
metrics = [
    "iroh-metrics/metrics",
    "iroh-relay/metrics",
    "portmapper/metrics",
]
test-utils = [
    "iroh-relay/test-utils",
    "iroh-relay/server",
    "dep:axum",
]

[lib]
name = "iroh"
crate-type = [
    "lib",
    "cdylib",
]
path = "src/lib.rs"

[[example]]
name = "0rtt"
path = "examples/0rtt.rs"
required-features = ["examples"]

[[example]]
name = "connect"
path = "examples/connect.rs"
required-features = ["examples"]

[[example]]
name = "connect-unreliable"
path = "examples/connect-unreliable.rs"
required-features = ["examples"]

[[example]]
name = "dht_discovery"
path = "examples/dht_discovery.rs"
required-features = ["discovery-pkarr-dht"]

[[example]]
name = "echo"
path = "examples/echo.rs"
required-features = ["examples"]

[[example]]
name = "echo-no-router"
path = "examples/echo-no-router.rs"
required-features = ["examples"]

[[example]]
name = "listen"
path = "examples/listen.rs"
required-features = ["examples"]

[[example]]
name = "listen-unreliable"
path = "examples/listen-unreliable.rs"
required-features = ["examples"]

[[example]]
name = "locally-discovered-nodes"
path = "examples/locally-discovered-nodes.rs"
required-features = ["discovery-local-network"]

[[example]]
name = "search"
path = "examples/search.rs"
required-features = ["examples"]

[[example]]
name = "transfer"
path = "examples/transfer.rs"
required-features = ["examples"]

[[test]]
name = "integration"
path = "tests/integration.rs"

[dependencies.aead]
version = "0.5.2"
features = [
    "bytes",
    "std",
]

[dependencies.axum]
version = "0.8"
optional = true

[dependencies.backon]
version = "1.4"

[dependencies.bytes]
version = "1.7"

[dependencies.clap]
version = "4"
features = ["derive"]
optional = true

[dependencies.crypto_box]
version = "0.9.1"
features = [
    "serde",
    "chacha20",
]

[dependencies.data-encoding]
version = "2.2"

[dependencies.der]
version = "0.7"
features = [
    "alloc",
    "derive",
]

[dependencies.derive_more]
version = "2.0.1"
features = [
    "debug",
    "display",
    "from",
    "try_into",
    "deref",
    "from_str",
]

[dependencies.ed25519-dalek]
version = "2.1.1"
features = [
    "serde",
    "rand_core",
    "zeroize",
    "pkcs8",
    "pem",
]

[dependencies.futures-buffered]
version = "0.2.11"

[dependencies.futures-util]
version = "0.3"

[dependencies.http]
version = "1"

[dependencies.indicatif]
version = "0.18"
features = ["tokio"]
optional = true

[dependencies.iroh-base]
version = "0.91.2"
features = [
    "key",
    "relay",
]
default-features = false

[dependencies.iroh-metrics]
version = "0.35"
default-features = false

[dependencies.iroh-relay]
version = "0.91"
default-features = false

[dependencies.n0-future]
version = "0.1.2"

[dependencies.n0-snafu]
version = "0.2.1"

[dependencies.n0-watcher]
version = "0.3"

[dependencies.nested_enum_utils]
version = "0.2.1"

[dependencies.netwatch]
version = "0.8"

[dependencies.parse-size]
version = "=1.0.0"
features = ["std"]
optional = true

[dependencies.pin-project]
version = "1"

[dependencies.pkarr]
version = "3.7"
features = ["relays"]
default-features = false

[dependencies.quinn]
version = "0.14.0"
features = ["rustls-ring"]
default-features = false
package = "iroh-quinn"

[dependencies.quinn-proto]
version = "0.13.0"
package = "iroh-quinn-proto"

[dependencies.quinn-udp]
version = "0.5.7"
package = "iroh-quinn-udp"

[dependencies.rand]
version = "0.8"

[dependencies.reqwest]
version = "0.12"
features = [
    "rustls-tls",
    "stream",
]
default-features = false

[dependencies.ring]
version = "0.17"

[dependencies.rustls]
version = "0.23"
features = ["ring"]
default-features = false

[dependencies.serde]
version = "1.0.219"
features = [
    "derive",
    "rc",
]

[dependencies.smallvec]
version = "1.11.1"

[dependencies.snafu]
version = "0.8.5"
features = ["rust_1_81"]

[dependencies.spki]
version = "0.7.3"
features = ["std"]

[dependencies.strum]
version = "0.27"
features = ["derive"]

[dependencies.stun-rs]
version = "0.1.11"

[dependencies.swarm-discovery]
version = "0.4"
optional = true

[dependencies.tokio]
version = "1.44.1"
features = [
    "io-util",
    "macros",
    "sync",
    "rt",
]

[dependencies.tokio-stream]
version = "0.1.15"
features = ["sync"]

[dependencies.tokio-util]
version = "0.7"
features = [
    "io-util",
    "io",
    "rt",
]

[dependencies.tracing]
version = "0.1"

[dependencies.tracing-subscriber]
version = "0.3"
features = ["env-filter"]
optional = true

[dependencies.url]
version = "2.5"
features = ["serde"]

[dependencies.webpki]
version = "0.103"
features = ["ring"]
package = "rustls-webpki"

[dependencies.webpki-roots]
version = "0.26"

[dependencies.webpki_types]
version = "1.12"
package = "rustls-pki-types"

[dependencies.z32]
version = "1.0.3"

[dev-dependencies.console_error_panic_hook]
version = "0.1"

[dev-dependencies.postcard]
version = "1.1.1"
features = ["use-std"]

[dev-dependencies.tracing-subscriber]
version = "0.3"
features = ["env-filter"]

[build-dependencies.cfg_aliases]
version = "0.2.1"

[target.'cfg(all(target_family = "wasm", target_os = "unknown"))'.dependencies.getrandom]
version = "0.3.2"
features = ["wasm_js"]

[target.'cfg(all(target_family = "wasm", target_os = "unknown"))'.dependencies.instant]
version = "0.1"
features = ["wasm-bindgen"]

[target.'cfg(all(target_family = "wasm", target_os = "unknown"))'.dependencies.time]
version = "0.3"
features = ["wasm-bindgen"]

[target.'cfg(all(target_family = "wasm", target_os = "unknown"))'.dependencies.wasm-bindgen-futures]
version = "0.4"

[target.'cfg(all(target_family = "wasm", target_os = "unknown"))'.dev-dependencies.tracing-subscriber-wasm]
version = "0.1.0"

[target.'cfg(all(target_family = "wasm", target_os = "unknown"))'.dev-dependencies.wasm-bindgen-test]
version = "0.3"

[target.'cfg(not(all(target_family = "wasm", target_os = "unknown")))'.dependencies.hickory-resolver]
version = "0.25.1"

[target.'cfg(not(all(target_family = "wasm", target_os = "unknown")))'.dependencies.igd-next]
version = "0.16"
features = ["aio_tokio"]

[target.'cfg(not(all(target_family = "wasm", target_os = "unknown")))'.dependencies.netdev]
version = "0.36.0"

[target.'cfg(not(all(target_family = "wasm", target_os = "unknown")))'.dependencies.portmapper]
version = "0.8"
default-features = false

[target.'cfg(not(all(target_family = "wasm", target_os = "unknown")))'.dependencies.quinn]
version = "0.14.0"
features = [
    "runtime-tokio",
    "rustls-ring",
]
default-features = false
package = "iroh-quinn"

[target.'cfg(not(all(target_family = "wasm", target_os = "unknown")))'.dependencies.surge-ping]
version = "0.8.0"

[target.'cfg(not(all(target_family = "wasm", target_os = "unknown")))'.dependencies.tokio]
version = "1"
features = [
    "io-util",
    "macros",
    "sync",
    "rt",
    "net",
    "fs",
    "io-std",
    "signal",
    "process",
]

[target.'cfg(not(all(target_family = "wasm", target_os = "unknown")))'.dev-dependencies.axum]
version = "0.8"

[target.'cfg(not(all(target_family = "wasm", target_os = "unknown")))'.dev-dependencies.clap]
version = "4"
features = ["derive"]

[target.'cfg(not(all(target_family = "wasm", target_os = "unknown")))'.dev-dependencies.pretty_assertions]
version = "1.4"

[target.'cfg(not(all(target_family = "wasm", target_os = "unknown")))'.dev-dependencies.rand_chacha]
version = "0.3.1"

[target.'cfg(not(all(target_family = "wasm", target_os = "unknown")))'.dev-dependencies.serde_json]
version = "1"

[target.'cfg(not(all(target_family = "wasm", target_os = "unknown")))'.dev-dependencies.tokio]
version = "1"
features = [
    "io-util",
    "sync",
    "rt",
    "net",
    "fs",
    "macros",
    "time",
    "test-util",
]

[target.'cfg(not(all(target_family = "wasm", target_os = "unknown")))'.dev-dependencies.tracing-test]
version = "0.2.5"

[lints.clippy]
unused-async = "warn"

[lints.rust]
missing_debug_implementations = "warn"

[lints.rust.unexpected_cfgs]
level = "warn"
priority = 0
check-cfg = [
    "cfg(iroh_docsrs)",
    "cfg(iroh_loom)",
]
